// Animation keyframes for smooth entrance
@keyframes fadeInUp {
	from {
		opacity: 0;
		transform: translateY(1rem);
	}
	to {
		opacity: 1;
		transform: translateY(0);
	}
}

@keyframes slideInFromTop {
	from {
		opacity: 0;
		transform: translateY(-0.5rem);
	}
	to {
		opacity: 1;
		transform: translateY(0);
	}
}

@keyframes scaleIn {
	from {
		opacity: 0;
		transform: scale(0.95);
	}
	to {
		opacity: 1;
		transform: scale(1);
	}
}

.userDemographicContainer {
	min-height: 100svh;
	width: 100vw;
	position: relative;
	background: linear-gradient(180deg, var(--surface-background) 0%, var(--statementBackground) 100%);
	display: flex;
	flex-direction: column;
	align-items: center;

	// Smooth entrance animation
	animation: fadeInUp 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94);

	.surveyBody {
		width: min(90%, 42rem); // Max width of 672px for optimal reading
		max-width: 100%;
		margin: 0 auto;
		padding: 0 var(--padding);
		padding-bottom: 6rem; // Space for fixed button

		// Card container for the form
		background: var(--card-default);
		border-radius: 8px;
		box-shadow: 0px 3px 6px rgba(115, 138, 191, 0.1),
					0px 3px 6px rgba(65, 98, 134, 0.08);
		margin-top: 1rem;

		// Subtle hover effect on desktop
		@media (hover: hover) {
			transition: box-shadow 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);

			&:hover {
				box-shadow: 0px 3px 6px rgba(115, 138, 191, 0.15),
							0px 6px 12px rgba(65, 98, 134, 0.1);
			}
		}

		@media screen and (min-width: 768px) {
			width: 70%;
			padding: 1.5rem;
			margin-top: 2rem;
		}
	}

	// Fixed button container with elevated design
	.button {
		position: fixed;
		bottom: 0;
		left: 0;
		right: 0;
		background: linear-gradient(180deg,
			rgba(242, 246, 255, 0) 0%,
			rgba(242, 246, 255, 0.8) 20%,
			var(--surface-background) 40%
		);
		padding: 1rem var(--padding) 2rem;
		display: flex;
		justify-content: center;
		z-index: 1000; // High z-index to ensure it's above modal content

		// Entrance animation for button - forwards to maintain final state
		animation: slideInFromTop 0.6s 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards;

		// Style the actual button element
		:global(button) {
			min-width: 200px;
			padding: 0.75rem 2rem;
			font-size: var(--p-font-size);
			font-weight: 500;
			border-radius: 20px;
			box-shadow: 0px 3px 6px rgba(95, 136, 229, 0.3);
			transition: all 0.2s cubic-bezier(0.25, 0.46, 0.45, 0.94);

			// Hover effect
			@media (hover: hover) {
				&:hover:not(:disabled) {
					transform: translateY(-2px);
					box-shadow: 0px 6px 12px rgba(95, 136, 229, 0.4);
				}

				&:active:not(:disabled) {
					transform: translateY(0);
					box-shadow: 0px 2px 4px rgba(95, 136, 229, 0.3);
				}
			}

			// Disabled state
			&:disabled {
				opacity: 0.6;
				cursor: not-allowed;
			}

			@media screen and (min-width: 768px) {
				min-width: 240px;
				padding: 0.85rem 2.5rem;
			}
		}

		@media screen and (min-width: 768px) {
			// Keep fixed positioning on desktop too when in modal
			// Remove the background gradient for cleaner look
			background: var(--surface-background);
			padding-top: 1.5rem;
		}
	}

	.title {
		font-size: var(--h2-font-size);
		font-weight: 500;
		color: var(--text-title);
		margin: 1.5rem var(--padding) 0.5rem;
		line-height: 1.3;

		// Staggered animation
		opacity: 0;
		animation: fadeInUp 0.5s 0.1s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards;

		@media screen and (min-width: 768px) {
			font-size: var(--h1-font-size);
			margin: 2rem var(--padding) 0.75rem;
		}
	}

	.description {
		font-size: var(--p-font-size);
		color: var(--text-caption);
		margin: 0 var(--padding) 2rem;
		line-height: 1.5;

		// Staggered animation
		opacity: 0;
		animation: fadeInUp 0.5s 0.2s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards;

		@media screen and (min-width: 768px) {
			margin-bottom: 2.5rem;
		}
	}

	// Form container with proper spacing
	form {
		display: flex;
		flex-direction: column;
		gap: 1rem; // Reduced from default animation stagger spacing

		// Progressive disclosure: form fields fade in with stagger
		> * {
			opacity: 0;
			animation: fadeInUp 0.5s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards;

			@for $i from 1 through 10 {
				&:nth-child(#{$i}) {
					animation-delay: #{0.3 + ($i * 0.05)}s;
				}
			}
		}
	}

	// Question section styling
	.questionSection {
		margin-bottom: 1.5rem;
		padding: 1rem;
		background-color: var(--surface-background);
		border-radius: 8px;
		border-left: 4px solid var(--btn-primary);

		.sectionTitle {
			font-size: var(--h4-font-size);
			font-weight: 600;
			color: var(--text-title);
			margin: 0 0 0.5rem 0;
		}

		.sectionDescription {
			font-size: var(--small-font-size);
			color: var(--text-caption);
			margin: 0 0 1rem 0;
			line-height: 1.4;
		}

		// Ensure form fields inside sections animate properly
		> *:not(.sectionTitle):not(.sectionDescription) {
			opacity: 1;
			animation: none;
		}
	}
}

.topNavSurvey {
	display: flex;
	align-items: center;
	justify-content: space-between;
	padding: 1rem var(--padding);
	margin-bottom: 0.5rem;

	// Subtle entrance animation
	opacity: 0;
	animation: slideInFromTop 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94) forwards;

	svg {
		width: 2.5rem;
		height: 2.5rem;
		color: var(--btn-primary);
		cursor: pointer;
		transition: all 0.2s cubic-bezier(0.25, 0.46, 0.45, 0.94);

		// Hover effect with scale and color
		@media (hover: hover) {
			&:hover {
				color: var(--btn-primary-hover);
				transform: translateX(-2px);
			}

			&:active {
				transform: translateX(-2px) scale(0.95);
			}
		}

		@media screen and (min-width: 768px) {
			width: 3rem;
			height: 3rem;
		}
	}

	.XBtn {
		width: 2rem;
		height: 2rem;
		color: var(--text-caption);
		transition: all 0.2s cubic-bezier(0.25, 0.46, 0.45, 0.94);

		@media (hover: hover) {
			&:hover {
				color: var(--text-error);
				transform: rotate(90deg) scale(1.1);
			}

			&:active {
				transform: rotate(90deg) scale(0.95);
			}
		}
	}
}

// Accessibility: Respect reduced motion preference
@media (prefers-reduced-motion: reduce) {
	.userDemographicContainer,
	.userDemographicContainer * {
		animation-duration: 0.01ms !important;
		animation-delay: 0.01ms !important;
		transition-duration: 0.01ms !important;
	}
}

// High contrast mode support
@media (prefers-contrast: high) {
	.userDemographicContainer {
		.surveyBody {
			border: 2px solid var(--text-title);
		}

		.title {
			color: var(--text-title-contrast);
		}

		.description {
			color: var(--text-body-contrast);
		}
	}
}

.spacer {
	flex: 1;
}
