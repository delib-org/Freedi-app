// UserDataSetting.module.scss

.userDataSettings {
	padding: 1.5rem;
	max-width: 600px;
	margin: 0 auto;

	@media screen and (max-width: 768px) {
		max-width: 100%;
		padding: 1rem;
	}

	.topNavSurvey {
		display: flex;
		align-items: center;
		margin-bottom: 1.5rem;
		padding-bottom: 1rem;
		border-bottom: 1px solid var(--border-primary);

		svg {
			width: 2.5rem;
			height: 2.5rem;
			color: var(--btn-primary);
			cursor: pointer;
			transition: transform 0.2s ease, color 0.2s ease;

			&:hover {
				transform: translateX(-2px);
			}
		}

		.XBtn {
			width: 1.75rem;
			height: 1.75rem;
			color: var(--text-caption);

			&:hover {
				color: var(--text-error);
				transform: rotate(90deg);
			}
		}
	}

	.spacer {
		flex: 1;
	}

	h3 {
		margin: 0 0 1.5rem 0;
		color: var(--text-title);
		font-size: var(--h3-font-size);
		font-weight: 600;
		text-align: right;
	}

	.newQuestionForm {
		margin-bottom: 2rem;
		padding: 1.5rem;
		border-radius: 12px;
		background-color: var(--card-default);
		border: 1px solid var(--border-primary);
		box-shadow: 0 2px 8px rgba(115, 138, 191, 0.08);
		position: relative;

		// Accent bar
		&::before {
			content: '';
			position: absolute;
			left: 0;
			top: 1rem;
			bottom: 1rem;
			width: 4px;
			background: var(--btn-primary);
			border-radius: 0 4px 4px 0;
		}

		.inputQuestion {
			font-size: 1rem;
			width: 100%;
			border: 2px solid var(--border-primary);
			border-radius: 10px;
			padding: 0.875rem 1rem;
			background-color: var(--surface-background);
			color: var(--text-body);
			transition: border-color 0.2s ease, box-shadow 0.2s ease;
			box-sizing: border-box;

			&:focus {
				outline: none;
				border-color: var(--btn-primary);
				box-shadow: 0 0 0 3px rgba(95, 136, 229, 0.15);
			}

			&::placeholder {
				color: var(--text-disabled);
			}
		}

		.addOption {
			width: fit-content;
			margin: 1rem 0;
			padding: 0.5rem 1rem;
			background-color: rgba(95, 136, 229, 0.08);
			border-radius: 8px;
			cursor: pointer;
			transition: background-color 0.2s ease;

			&:hover {
				background-color: rgba(95, 136, 229, 0.15);
			}

			h4 {
				font-size: 0.9375rem;
				color: var(--btn-primary);
				cursor: pointer;
				user-select: none;
				margin: 0;
				font-weight: 500;
			}
		}

		.addOptionContainer {
			margin: 1rem 0;
			display: flex;
			flex-direction: column;
			gap: 0.5rem;

			.option {
				display: flex;
				align-items: center;
				gap: 0.5rem;
				padding: 0.5rem 0.75rem;
				background-color: var(--card-default);
				border-radius: 8px;
				border: 1px solid var(--border-primary);
				transition: border-color 0.2s ease;

				&:hover {
					border-color: var(--btn-primary-hover);
				}

				// Radio/Checkbox icon
				svg:first-child {
					width: 1.25rem;
					height: 1.25rem;
					color: var(--btn-primary);
					flex-shrink: 0;
					opacity: 0.6;
				}

				.optionColor {
					width: 1.75rem;
					height: 1.75rem;
					cursor: pointer;
					border: none;
					border-radius: 50%;
					padding: 0;
					background: transparent;
					flex-shrink: 0;

					&::-webkit-color-swatch-wrapper {
						padding: 0;
					}

					&::-webkit-color-swatch {
						border: 2px solid var(--border-primary);
						border-radius: 50%;
					}

					&:hover::-webkit-color-swatch {
						border-color: var(--btn-primary);
					}
				}

				.inputAnswer {
					font-size: 0.875rem;
					flex: 1;
					padding: 0.5rem 0.75rem;
					border: 1px solid transparent;
					border-radius: 6px;
					background-color: transparent;
					color: var(--text-body);
					transition: all 0.2s ease;
					min-width: 0;

					&:focus {
						outline: none;
						border-color: var(--btn-primary);
						background-color: var(--surface-background);
					}

					&::placeholder {
						color: var(--text-disabled);
					}
				}

				// Delete icon
				> svg:last-child {
					width: 1.25rem;
					height: 1.25rem;
					margin: 0;
					cursor: pointer;
					transition: all 0.2s ease;
					opacity: 0.5;

					&:hover {
						opacity: 1;
						transform: scale(1.1);
					}
				}
			}
		}

		h4 {
			margin: 0 0 0.75rem 0;
			color: var(--text-title);
			font-size: 1rem;
			font-weight: 500;
		}

		.selectField {
			display: flex;
			align-items: center;
			gap: 0.75rem;
			margin-top: 1rem;

			select {
				padding: 0.5rem 2rem 0.5rem 0.75rem;
				border: 1px solid var(--border-primary);
				border-radius: 20px;
				font-size: 0.875rem;
				background-color: var(--card-default);
				color: var(--text-body);
				cursor: pointer;
				transition: all 0.2s ease;
				appearance: none;
				background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 24 24' fill='none' stroke='%236b7280' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");
				background-repeat: no-repeat;
				background-position: right 0.75rem center;
				min-width: 180px;

				&:hover {
					border-color: var(--btn-primary);
					background-color: rgba(95, 136, 229, 0.04);
				}

				&:focus {
					outline: none;
					border-color: var(--btn-primary);
					box-shadow: 0 0 0 3px rgba(95, 136, 229, 0.1);
				}
			}
		}

		.scopeToggle {
			margin-top: 1rem;
			display: flex;
			align-items: flex-start;
			gap: 0.75rem;

			.scopeLabel {
				display: flex;
				align-items: flex-start;
				gap: 0.75rem;
				cursor: pointer;
				flex: 1;

				input[type='checkbox'] {
					appearance: none;
					-webkit-appearance: none;
					width: 1.25rem;
					height: 1.25rem;
					min-width: 1.25rem;
					border: 2px solid var(--border-primary);
					border-radius: 4px;
					background-color: var(--card-default);
					cursor: pointer;
					position: relative;
					transition: all 0.2s ease;
					margin-top: 0.125rem;

					&:checked {
						border-color: var(--btn-primary);
						background-color: var(--btn-primary);

						&::after {
							content: '';
							position: absolute;
							top: 45%;
							left: 50%;
							transform: translate(-50%, -50%) rotate(45deg);
							width: 0.3rem;
							height: 0.55rem;
							border: solid white;
							border-width: 0 2px 2px 0;
						}
					}

					&:hover {
						border-color: var(--btn-primary);
					}

					&:focus-visible {
						outline: none;
						box-shadow: 0 0 0 3px rgba(95, 136, 229, 0.2);
					}
				}

				span {
					font-size: 0.9375rem;
					font-weight: 500;
					color: var(--text-title);
					line-height: 1.4;
				}
			}

			.scopeHint {
				margin: 0.25rem 0 0 2rem;
				font-size: 0.8125rem;
				color: var(--text-caption);
				line-height: 1.4;
			}
		}

		.bulkPasteToggle {
			display: block;
			background: none;
			border: none;
			color: var(--btn-primary);
			cursor: pointer;
			font-size: 0.875rem;
			padding: 0.5rem 0;
			transition: color 0.2s ease;

			&:hover {
				color: var(--btn-primary-hover);
			}
		}

		.bulkPasteSection {
			margin-top: 0.5rem;
			display: flex;
			flex-direction: column;
			gap: 0.5rem;
		}

		.bulkPasteTextarea {
			width: 100%;
			padding: 0.75rem;
			border: 2px solid var(--border-primary);
			border-radius: 8px;
			font-size: 0.875rem;
			background-color: var(--surface-background);
			color: var(--text-body);
			resize: vertical;
			box-sizing: border-box;
			font-family: inherit;

			&:focus {
				outline: none;
				border-color: var(--btn-primary);
				box-shadow: 0 0 0 3px rgba(95, 136, 229, 0.15);
			}

			&::placeholder {
				color: var(--text-disabled);
			}
		}

		.bulkPasteActions {
			display: flex;
			align-items: center;
			justify-content: flex-end;
			gap: 0.75rem;
		}

		.bulkPasteCount {
			font-size: 0.8125rem;
			color: var(--text-caption);
		}

		.allowOtherToggle {
			margin-top: 0.75rem;
			padding-top: 0.75rem;
			border-top: 1px solid var(--border-primary);
		}

		.allowOtherLabel {
			display: flex;
			align-items: center;
			gap: 0.5rem;
			cursor: pointer;
			font-size: 0.9375rem;
			color: var(--text-body);

			input[type='checkbox'] {
				cursor: pointer;
			}
		}

	}

	.bottomBar {
		border-top: 1px solid var(--border-primary);
		display: flex;
		padding-top: 1.25rem;
		margin-top: 1.25rem;
		align-items: center;
		gap: 1rem;

		.requiredToggle {
			display: flex;
			align-items: center;
			gap: 0.75rem;

			span {
				font-size: 0.9375rem;
				font-weight: 500;
				color: var(--text-title);
			}
		}

		.slideButtonContainer {
			width: 3rem;
			height: 1.5rem;
			background-color: var(--border-primary);
			border-radius: 0.75rem;
			transition: background-color 0.3s ease;
			cursor: pointer;
			position: relative;

			.slideButtonHandle {
				width: 1.25rem;
				height: 1.25rem;
				position: absolute;
				top: 50%;
				transform: translateY(-50%);
				border: none;
				border-radius: 50%;
				background-color: var(--card-default);
				box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
				transition: left 0.3s ease;
			}

			.slideButtonHandle.active {
				left: calc(100% - 1.375rem);
			}

			.slideButtonHandle.inactive {
				left: 0.125rem;
			}
		}
	}

	.existingQuestions {
		h4 {
			margin: 0 0 1rem 0;
			color: var(--text-title);
			font-size: 1.125rem;
			font-weight: 600;
		}

		.emptyState {
			color: var(--text-caption);
			font-style: italic;
			text-align: center;
			padding: 2rem;
			background-color: var(--surface-background);
			border-radius: 12px;
			border: 2px dashed var(--border-primary);
			font-size: 0.9375rem;
		}
	}
}
