(()=>{var e={};e.id=337,e.ids=[337],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},2048:e=>{"use strict";e.exports=require("fs")},3263:e=>{"use strict";e.exports=import("firebase-admin/app")},2929:e=>{"use strict";e.exports=import("firebase-admin/firestore")},4346:(e,a,t)=>{"use strict";t.a(e,async(e,s)=>{try{t.r(a),t.d(a,{GlobalError:()=>o.a,__next_app__:()=>p,originalPathname:()=>h,pages:()=>u,routeModule:()=>g,tree:()=>m}),t(8980);var i=t(5616);t(4484),t(1430),t(7093),t(5866);var n=t(3191),r=t(8716),d=t(7922),o=t.n(d),l=t(5231),_={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(_[e]=()=>l[e]);t.d(a,_);var c=e([i]);i=(c.then?(await c)():c)[0];let m=["",{children:["doc",{children:["[statementId]",{children:["admin",{children:["users",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,8980)),"/Users/talyaron/Documents/Freedi-app/apps/sign/app/doc/[statementId]/admin/users/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,5616)),"/Users/talyaron/Documents/Freedi-app/apps/sign/app/doc/[statementId]/admin/layout.tsx"]}]},{loading:[()=>Promise.resolve().then(t.bind(t,4484)),"/Users/talyaron/Documents/Freedi-app/apps/sign/app/doc/[statementId]/loading.tsx"],"not-found":[()=>Promise.resolve().then(t.bind(t,1430)),"/Users/talyaron/Documents/Freedi-app/apps/sign/app/doc/[statementId]/not-found.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,7093)),"/Users/talyaron/Documents/Freedi-app/apps/sign/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,5866,23)),"next/dist/client/components/not-found-error"]}],u=["/Users/talyaron/Documents/Freedi-app/apps/sign/app/doc/[statementId]/admin/users/page.tsx"],h="/doc/[statementId]/admin/users/page",p={require:t,loadChunk:()=>Promise.resolve()},g=new n.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/doc/[statementId]/admin/users/page",pathname:"/doc/[statementId]/admin/users",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:m}});s()}catch(e){s(e)}})},1794:(e,a,t)=>{Promise.resolve().then(t.t.bind(t,9404,23))},1773:(e,a,t)=>{Promise.resolve().then(t.bind(t,8690))},8690:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>l});var s=t(326),i=t(7577),n=t(5047),r=t(1981),d=t(9082),o=t.n(d);function l(){let e=(0,n.useParams)().statementId,{t:a}=(0,r.$G)(),[t,d]=(0,i.useState)([]),[l,_]=(0,i.useState)(!0),[c,m]=(0,i.useState)(""),[u,h]=(0,i.useState)("all"),[p,g]=(0,i.useState)(!1);(0,i.useCallback)(async()=>{try{_(!0);let a=new URLSearchParams;"all"!==u&&a.set("status",u),c&&a.set("search",c);let t=await fetch(`/api/admin/users/${e}?${a}`);if(t.ok){let e=await t.json();d(e.users)}}catch(e){console.error("Failed to fetch users:",e)}finally{_(!1)}},[e,u,c]);let x=async()=>{try{g(!0);let a=await fetch(`/api/admin/export/${e}`);if(a.ok){let t=await a.blob(),s=window.URL.createObjectURL(t),i=document.createElement("a");i.href=s,i.download=`document-users-${e}.csv`,document.body.appendChild(i),i.click(),window.URL.revokeObjectURL(s),i.remove()}}catch(e){console.error("Export failed:",e)}finally{g(!1)}},v=e=>e?new Date(e).toLocaleDateString():"-",b=e=>{switch(e){case"signed":return o().signed;case"rejected":return o().rejected;case"viewed":return o().viewed;default:return o().pending}};return(0,s.jsxs)("div",{className:o().usersPage,children:[(0,s.jsxs)("header",{className:o().dashboardHeader,children:[s.jsx("h1",{className:o().dashboardTitle,children:a("Users")}),s.jsx("p",{className:o().dashboardSubtitle,children:a("Manage document participants")})]}),(0,s.jsxs)("div",{className:o().toolbar,children:[s.jsx("input",{type:"text",className:o().searchInput,placeholder:a("Search users..."),value:c,onChange:e=>m(e.target.value)}),(0,s.jsxs)("select",{className:o().filterSelect,value:u,onChange:e=>h(e.target.value),children:[s.jsx("option",{value:"all",children:a("All Status")}),s.jsx("option",{value:"signed",children:a("Signed")}),s.jsx("option",{value:"rejected",children:a("Rejected")}),s.jsx("option",{value:"viewed",children:a("Viewed")})]}),(0,s.jsxs)("button",{className:o().exportButton,onClick:x,disabled:p,children:[(0,s.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[s.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),s.jsx("polyline",{points:"7 10 12 15 17 10"}),s.jsx("line",{x1:"12",y1:"15",x2:"12",y2:"3"})]}),p?a("Exporting..."):a("Export CSV")]})]}),s.jsx("section",{className:o().section,children:l?s.jsx("p",{style:{textAlign:"center",padding:"var(--spacing-lg)",color:"var(--text-secondary)"},children:a("Loading...")}):0===t.length?s.jsx("p",{style:{textAlign:"center",padding:"var(--spacing-lg)",color:"var(--text-secondary)"},children:a("No users found")}):(0,s.jsxs)("table",{className:o().usersTable,children:[s.jsx("thead",{children:(0,s.jsxs)("tr",{children:[s.jsx("th",{children:a("User")}),s.jsx("th",{children:a("Status")}),s.jsx("th",{children:a("Date")}),s.jsx("th",{children:a("Approvals")}),s.jsx("th",{children:a("Comments")})]})}),s.jsx("tbody",{children:t.map(e=>(0,s.jsxs)("tr",{children:[s.jsx("td",{children:(0,s.jsxs)("div",{children:[s.jsx("strong",{children:e.odlUserDisplayName}),s.jsx("br",{}),(0,s.jsxs)("small",{style:{color:"var(--text-caption)"},children:[e.odlUserId.substring(0,12),"..."]})]})}),s.jsx("td",{children:s.jsx("span",{className:`${o().statusBadge} ${b(e.signed)}`,children:a(e.signed.charAt(0).toUpperCase()+e.signed.slice(1))})}),s.jsx("td",{children:v(e.signedAt)}),s.jsx("td",{children:e.approvalsCount}),s.jsx("td",{children:e.commentsCount})]},e.odlUserId))})]})})]})}},5047:(e,a,t)=>{"use strict";var s=t(7389);t.o(s,"useParams")&&t.d(a,{useParams:function(){return s.useParams}}),t.o(s,"useRouter")&&t.d(a,{useRouter:function(){return s.useRouter}}),t.o(s,"useSearchParams")&&t.d(a,{useSearchParams:function(){return s.useSearchParams}})},1981:(e,a,t)=>{"use strict";t.d(a,{$G:()=>s.useTranslation}),t(1410),t(1956),t(9982);var s=t(6890)},3327:e=>{e.exports={adminLayout:"admin_adminLayout__1MVcB",sidebar:"admin_sidebar__mZCpf",sidebarHeader:"admin_sidebarHeader__Z3kk2",sidebarTitle:"admin_sidebarTitle__uU8zJ",documentTitle:"admin_documentTitle__lrZ_l",nav:"admin_nav__M_3kB",navLink:"admin_navLink__CFUuZ",sidebarFooter:"admin_sidebarFooter__NGLgJ",backLink:"admin_backLink__Gfv40",main:"admin_main__F9VHN",dashboard:"admin_dashboard__NpR5F",dashboardHeader:"admin_dashboardHeader__be8ww",dashboardTitle:"admin_dashboardTitle__oV8_R",dashboardSubtitle:"admin_dashboardSubtitle__fpPjZ",statsGrid:"admin_statsGrid__nmnuH",statCard:"admin_statCard__S6jgD",statLabel:"admin_statLabel__BdXql",statValue:"admin_statValue__tHjoa",statChange:"admin_statChange__LfzdD",positive:"admin_positive__6thQ6",negative:"admin_negative__OpX3G",section:"admin_section__RTcYl",sectionTitle:"admin_sectionTitle__EsOS5",usersPage:"admin_usersPage__JK6aG",toolbar:"admin_toolbar__y_BGr",searchInput:"admin_searchInput__WS1_4",filterSelect:"admin_filterSelect__LWKSW",exportButton:"admin_exportButton__mgv5Z",usersTable:"admin_usersTable__YyjV7",statusBadge:"admin_statusBadge__6E9Rr",signed:"admin_signed__ey_ej",rejected:"admin_rejected__NznPm",viewed:"admin_viewed__YSLt_",pending:"admin_pending__n4kRq",settingsPage:"admin_settingsPage__AATSK",settingsSection:"admin_settingsSection__07yQ5",settingsSectionTitle:"admin_settingsSectionTitle__Je3qb",settingRow:"admin_settingRow__uJYZC",settingInfo:"admin_settingInfo__Q3ci7",settingLabel:"admin_settingLabel__ZsRUl",settingDescription:"admin_settingDescription__YDapz",toggle:"admin_toggle__FaYY_",active:"admin_active__wqnXv",saveButton:"admin_saveButton__p2JKC"}},9082:e=>{e.exports={adminLayout:"admin_adminLayout__1MVcB",sidebar:"admin_sidebar__mZCpf",sidebarHeader:"admin_sidebarHeader__Z3kk2",sidebarTitle:"admin_sidebarTitle__uU8zJ",documentTitle:"admin_documentTitle__lrZ_l",nav:"admin_nav__M_3kB",navLink:"admin_navLink__CFUuZ",sidebarFooter:"admin_sidebarFooter__NGLgJ",backLink:"admin_backLink__Gfv40",main:"admin_main__F9VHN",dashboard:"admin_dashboard__NpR5F",dashboardHeader:"admin_dashboardHeader__be8ww",dashboardTitle:"admin_dashboardTitle__oV8_R",dashboardSubtitle:"admin_dashboardSubtitle__fpPjZ",statsGrid:"admin_statsGrid__nmnuH",statCard:"admin_statCard__S6jgD",statLabel:"admin_statLabel__BdXql",statValue:"admin_statValue__tHjoa",statChange:"admin_statChange__LfzdD",positive:"admin_positive__6thQ6",negative:"admin_negative__OpX3G",section:"admin_section__RTcYl",sectionTitle:"admin_sectionTitle__EsOS5",usersPage:"admin_usersPage__JK6aG",toolbar:"admin_toolbar__y_BGr",searchInput:"admin_searchInput__WS1_4",filterSelect:"admin_filterSelect__LWKSW",exportButton:"admin_exportButton__mgv5Z",usersTable:"admin_usersTable__YyjV7",statusBadge:"admin_statusBadge__6E9Rr",signed:"admin_signed__ey_ej",rejected:"admin_rejected__NznPm",viewed:"admin_viewed__YSLt_",pending:"admin_pending__n4kRq",settingsPage:"admin_settingsPage__AATSK",settingsSection:"admin_settingsSection__07yQ5",settingsSectionTitle:"admin_settingsSectionTitle__Je3qb",settingRow:"admin_settingRow__uJYZC",settingInfo:"admin_settingInfo__Q3ci7",settingLabel:"admin_settingLabel__ZsRUl",settingDescription:"admin_settingDescription__YDapz",toggle:"admin_toggle__FaYY_",active:"admin_active__wqnXv",saveButton:"admin_saveButton__p2JKC"}},5616:(e,a,t)=>{"use strict";t.a(e,async(e,s)=>{try{t.r(a),t.d(a,{default:()=>u});var i=t(9510),n=t(7371),r=t(1615),d=t(8585),o=t(8894),l=t(5734),_=t(3327),c=t.n(_),m=e([o]);async function u({children:e,params:a}){let{statementId:t}=await a,s=await (0,r.cookies)(),_=(0,l.ld)(s.toString());_||(0,d.redirect)(`/login?redirect=/doc/${t}/admin`);let m=await (0,o.SR)(t);return m||(0,d.redirect)("/"),m.creator?.uid===_||m.creatorId===_||(0,d.redirect)(`/doc/${t}`),(0,i.jsxs)("div",{className:c().adminLayout,children:[(0,i.jsxs)("aside",{className:c().sidebar,children:[(0,i.jsxs)("div",{className:c().sidebarHeader,children:[i.jsx("h2",{className:c().sidebarTitle,children:"Admin Panel"}),i.jsx("p",{className:c().documentTitle,children:m.statement})]}),(0,i.jsxs)("nav",{className:c().nav,children:[(0,i.jsxs)(n.default,{href:`/doc/${t}/admin`,className:c().navLink,children:[(0,i.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[i.jsx("rect",{x:"3",y:"3",width:"7",height:"7"}),i.jsx("rect",{x:"14",y:"3",width:"7",height:"7"}),i.jsx("rect",{x:"14",y:"14",width:"7",height:"7"}),i.jsx("rect",{x:"3",y:"14",width:"7",height:"7"})]}),"Dashboard"]}),(0,i.jsxs)(n.default,{href:`/doc/${t}/admin/users`,className:c().navLink,children:[(0,i.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[i.jsx("path",{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"}),i.jsx("circle",{cx:"9",cy:"7",r:"4"}),i.jsx("path",{d:"M23 21v-2a4 4 0 0 0-3-3.87"}),i.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]}),"Users"]}),(0,i.jsxs)(n.default,{href:`/doc/${t}/admin/settings`,className:c().navLink,children:[(0,i.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[i.jsx("circle",{cx:"12",cy:"12",r:"3"}),i.jsx("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"})]}),"Settings"]})]}),i.jsx("div",{className:c().sidebarFooter,children:(0,i.jsxs)(n.default,{href:`/doc/${t}`,className:c().backLink,children:[i.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:i.jsx("path",{d:"M19 12H5M12 19l-7-7 7-7"})}),"Back to Document"]})})]}),i.jsx("main",{className:c().main,children:e})]})}o=(m.then?(await m)():m)[0],s()}catch(e){s(e)}})},8980:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>s});let s=(0,t(8570).createProxy)(String.raw`/Users/talyaron/Documents/Freedi-app/apps/sign/app/doc/[statementId]/admin/users/page.tsx#default`)}};var a=require("../../../../../webpack-runtime.js");a.C(e);var t=e=>a(a.s=e),s=a.X(0,[380,704,552,15,490,365],()=>t(4346));module.exports=s})();