(()=>{var e={};e.id=934,e.ids=[934],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},2048:e=>{"use strict";e.exports=require("fs")},3263:e=>{"use strict";e.exports=import("firebase-admin/app")},2929:e=>{"use strict";e.exports=import("firebase-admin/firestore")},8251:(e,a,t)=>{"use strict";t.a(e,async(e,s)=>{try{t.r(a),t.d(a,{GlobalError:()=>o.a,__next_app__:()=>u,originalPathname:()=>x,pages:()=>_,routeModule:()=>g,tree:()=>p});var i=t(8895),n=t(5616);t(4484),t(1430),t(7093),t(5866);var r=t(3191),d=t(8716),l=t(7922),o=t.n(l),c=t(5231),m={};for(let e in c)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(m[e]=()=>c[e]);t.d(a,m);var h=e([i,n]);[i,n]=h.then?(await h)():h;let p=["",{children:["doc",{children:["[statementId]",{children:["admin",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,8895)),"/Users/talyaron/Documents/Freedi-app/apps/sign/app/doc/[statementId]/admin/page.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,5616)),"/Users/talyaron/Documents/Freedi-app/apps/sign/app/doc/[statementId]/admin/layout.tsx"]}]},{loading:[()=>Promise.resolve().then(t.bind(t,4484)),"/Users/talyaron/Documents/Freedi-app/apps/sign/app/doc/[statementId]/loading.tsx"],"not-found":[()=>Promise.resolve().then(t.bind(t,1430)),"/Users/talyaron/Documents/Freedi-app/apps/sign/app/doc/[statementId]/not-found.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,7093)),"/Users/talyaron/Documents/Freedi-app/apps/sign/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,5866,23)),"next/dist/client/components/not-found-error"]}],_=["/Users/talyaron/Documents/Freedi-app/apps/sign/app/doc/[statementId]/admin/page.tsx"],x="/doc/[statementId]/admin/page",u={require:t,loadChunk:()=>Promise.resolve()},g=new r.AppPageRouteModule({definition:{kind:d.x.APP_PAGE,page:"/doc/[statementId]/admin/page",pathname:"/doc/[statementId]/admin",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:p}});s()}catch(e){s(e)}})},1794:(e,a,t)=>{Promise.resolve().then(t.t.bind(t,9404,23))},5303:()=>{},3327:e=>{e.exports={adminLayout:"admin_adminLayout__1MVcB",sidebar:"admin_sidebar__mZCpf",sidebarHeader:"admin_sidebarHeader__Z3kk2",sidebarTitle:"admin_sidebarTitle__uU8zJ",documentTitle:"admin_documentTitle__lrZ_l",nav:"admin_nav__M_3kB",navLink:"admin_navLink__CFUuZ",sidebarFooter:"admin_sidebarFooter__NGLgJ",backLink:"admin_backLink__Gfv40",main:"admin_main__F9VHN",dashboard:"admin_dashboard__NpR5F",dashboardHeader:"admin_dashboardHeader__be8ww",dashboardTitle:"admin_dashboardTitle__oV8_R",dashboardSubtitle:"admin_dashboardSubtitle__fpPjZ",statsGrid:"admin_statsGrid__nmnuH",statCard:"admin_statCard__S6jgD",statLabel:"admin_statLabel__BdXql",statValue:"admin_statValue__tHjoa",statChange:"admin_statChange__LfzdD",positive:"admin_positive__6thQ6",negative:"admin_negative__OpX3G",section:"admin_section__RTcYl",sectionTitle:"admin_sectionTitle__EsOS5",usersPage:"admin_usersPage__JK6aG",toolbar:"admin_toolbar__y_BGr",searchInput:"admin_searchInput__WS1_4",filterSelect:"admin_filterSelect__LWKSW",exportButton:"admin_exportButton__mgv5Z",usersTable:"admin_usersTable__YyjV7",statusBadge:"admin_statusBadge__6E9Rr",signed:"admin_signed__ey_ej",rejected:"admin_rejected__NznPm",viewed:"admin_viewed__YSLt_",pending:"admin_pending__n4kRq",settingsPage:"admin_settingsPage__AATSK",settingsSection:"admin_settingsSection__07yQ5",settingsSectionTitle:"admin_settingsSectionTitle__Je3qb",settingRow:"admin_settingRow__uJYZC",settingInfo:"admin_settingInfo__Q3ci7",settingLabel:"admin_settingLabel__ZsRUl",settingDescription:"admin_settingDescription__YDapz",toggle:"admin_toggle__FaYY_",active:"admin_active__wqnXv",saveButton:"admin_saveButton__p2JKC"}},5616:(e,a,t)=>{"use strict";t.a(e,async(e,s)=>{try{t.r(a),t.d(a,{default:()=>p});var i=t(9510),n=t(7371),r=t(1615),d=t(8585),l=t(8894),o=t(5734),c=t(3327),m=t.n(c),h=e([l]);async function p({children:e,params:a}){let{statementId:t}=await a,s=await (0,r.cookies)(),c=(0,o.ld)(s.toString());c||(0,d.redirect)(`/login?redirect=/doc/${t}/admin`);let h=await (0,l.SR)(t);return h||(0,d.redirect)("/"),h.creator?.uid===c||h.creatorId===c||(0,d.redirect)(`/doc/${t}`),(0,i.jsxs)("div",{className:m().adminLayout,children:[(0,i.jsxs)("aside",{className:m().sidebar,children:[(0,i.jsxs)("div",{className:m().sidebarHeader,children:[i.jsx("h2",{className:m().sidebarTitle,children:"Admin Panel"}),i.jsx("p",{className:m().documentTitle,children:h.statement})]}),(0,i.jsxs)("nav",{className:m().nav,children:[(0,i.jsxs)(n.default,{href:`/doc/${t}/admin`,className:m().navLink,children:[(0,i.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[i.jsx("rect",{x:"3",y:"3",width:"7",height:"7"}),i.jsx("rect",{x:"14",y:"3",width:"7",height:"7"}),i.jsx("rect",{x:"14",y:"14",width:"7",height:"7"}),i.jsx("rect",{x:"3",y:"14",width:"7",height:"7"})]}),"Dashboard"]}),(0,i.jsxs)(n.default,{href:`/doc/${t}/admin/users`,className:m().navLink,children:[(0,i.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[i.jsx("path",{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"}),i.jsx("circle",{cx:"9",cy:"7",r:"4"}),i.jsx("path",{d:"M23 21v-2a4 4 0 0 0-3-3.87"}),i.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]}),"Users"]}),(0,i.jsxs)(n.default,{href:`/doc/${t}/admin/settings`,className:m().navLink,children:[(0,i.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[i.jsx("circle",{cx:"12",cy:"12",r:"3"}),i.jsx("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"})]}),"Settings"]})]}),i.jsx("div",{className:m().sidebarFooter,children:(0,i.jsxs)(n.default,{href:`/doc/${t}`,className:m().backLink,children:[i.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:i.jsx("path",{d:"M19 12H5M12 19l-7-7 7-7"})}),"Back to Document"]})})]}),i.jsx("main",{className:m().main,children:e})]})}l=(h.then?(await h)():h)[0],s()}catch(e){s(e)}})},8895:(e,a,t)=>{"use strict";t.a(e,async(e,s)=>{try{t.r(a),t.d(a,{default:()=>m});var i=t(9510),n=t(1615),r=t(8894),d=t(5734),l=t(3327),o=t.n(l),c=e([r]);async function m({params:e}){let{statementId:a}=await e,t=await (0,n.cookies)(),s=(0,d.ld)(t.toString())?await (0,r.V_)(a):null;return(0,i.jsxs)("div",{className:o().dashboard,children:[(0,i.jsxs)("header",{className:o().dashboardHeader,children:[i.jsx("h1",{className:o().dashboardTitle,children:"Dashboard"}),i.jsx("p",{className:o().dashboardSubtitle,children:"Overview of document engagement and signatures"})]}),(0,i.jsxs)("div",{className:o().statsGrid,children:[(0,i.jsxs)("div",{className:o().statCard,children:[i.jsx("p",{className:o().statLabel,children:"Total Participants"}),i.jsx("p",{className:o().statValue,children:s?.totalParticipants||0})]}),(0,i.jsxs)("div",{className:o().statCard,children:[i.jsx("p",{className:o().statLabel,children:"Signed"}),i.jsx("p",{className:o().statValue,children:s?.signedCount||0}),(0,i.jsxs)("p",{className:`${o().statChange} ${o().positive}`,children:[s?.totalParticipants?Math.round(s.signedCount/s.totalParticipants*100):0,"% of participants"]})]}),(0,i.jsxs)("div",{className:o().statCard,children:[i.jsx("p",{className:o().statLabel,children:"Rejected"}),i.jsx("p",{className:o().statValue,children:s?.rejectedCount||0}),(0,i.jsxs)("p",{className:`${o().statChange} ${o().negative}`,children:[s?.totalParticipants?Math.round(s.rejectedCount/s.totalParticipants*100):0,"% of participants"]})]}),(0,i.jsxs)("div",{className:o().statCard,children:[i.jsx("p",{className:o().statLabel,children:"Viewed Only"}),i.jsx("p",{className:o().statValue,children:s?.viewedCount||0})]}),(0,i.jsxs)("div",{className:o().statCard,children:[i.jsx("p",{className:o().statLabel,children:"Total Comments"}),i.jsx("p",{className:o().statValue,children:s?.totalComments||0})]}),(0,i.jsxs)("div",{className:o().statCard,children:[i.jsx("p",{className:o().statLabel,children:"Avg. Approval"}),i.jsx("p",{className:o().statValue,children:s?.averageApproval?s.averageApproval.toFixed(1):"0.0"}),i.jsx("p",{className:o().statChange,children:"out of 5"})]})]}),(0,i.jsxs)("section",{className:o().section,children:[i.jsx("h2",{className:o().sectionTitle,children:"Most Engaged Paragraphs"}),s?.topParagraphs&&s.topParagraphs.length>0?(0,i.jsxs)("table",{className:o().usersTable,children:[i.jsx("thead",{children:(0,i.jsxs)("tr",{children:[i.jsx("th",{children:"Paragraph"}),i.jsx("th",{children:"Approvals"}),i.jsx("th",{children:"Comments"}),i.jsx("th",{children:"Avg. Rating"})]})}),i.jsx("tbody",{children:s.topParagraphs.slice(0,5).map((e,a)=>(0,i.jsxs)("tr",{children:[(0,i.jsxs)("td",{children:[e.statement?.substring(0,60),e.statement&&e.statement.length>60?"...":""]}),i.jsx("td",{children:e.approvalCount||0}),i.jsx("td",{children:e.commentCount||0}),i.jsx("td",{children:e.avgApproval?.toFixed(1)||"0.0"})]},e.paragraphId||a))})]}):i.jsx("p",{style:{color:"var(--text-secondary)",textAlign:"center",padding:"var(--spacing-lg)"},children:"No paragraph data available yet"})]}),(0,i.jsxs)("section",{className:o().section,children:[i.jsx("h2",{className:o().sectionTitle,children:"Quick Actions"}),(0,i.jsxs)("div",{style:{display:"flex",gap:"var(--spacing-md)",flexWrap:"wrap"},children:[i.jsx("a",{href:`/doc/${a}/admin/users`,className:o().exportButton,style:{textDecoration:"none"},children:"View All Users"}),i.jsx("a",{href:`/doc/${a}/admin/settings`,className:o().exportButton,style:{textDecoration:"none",background:"var(--text-secondary)"},children:"Document Settings"}),i.jsx("a",{href:`/api/admin/export/${a}`,className:o().exportButton,style:{textDecoration:"none",background:"var(--agree)"},children:"Export CSV"})]})]})]})}r=(c.then?(await c)():c)[0],s()}catch(e){s(e)}})}};var a=require("../../../../webpack-runtime.js");a.C(e);var t=e=>a(a.s=e),s=a.X(0,[380,704,552,15,490,365],()=>t(8251));module.exports=s})();