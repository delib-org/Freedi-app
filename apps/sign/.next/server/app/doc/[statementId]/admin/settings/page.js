(()=>{var e={};e.id=855,e.ids=[855],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},2048:e=>{"use strict";e.exports=require("fs")},3263:e=>{"use strict";e.exports=import("firebase-admin/app")},2929:e=>{"use strict";e.exports=import("firebase-admin/firestore")},386:(e,t,a)=>{"use strict";a.a(e,async(e,s)=>{try{a.r(t),a.d(t,{GlobalError:()=>o.a,__next_app__:()=>u,originalPathname:()=>p,pages:()=>g,routeModule:()=>h,tree:()=>m}),a(8742);var i=a(5616);a(4484),a(1430),a(7093),a(5866);var n=a(3191),d=a(8716),r=a(7922),o=a.n(r),l=a(5231),c={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>l[e]);a.d(t,c);var _=e([i]);i=(_.then?(await _)():_)[0];let m=["",{children:["doc",{children:["[statementId]",{children:["admin",{children:["settings",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,8742)),"/Users/talyaron/Documents/Freedi-app/apps/sign/app/doc/[statementId]/admin/settings/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,5616)),"/Users/talyaron/Documents/Freedi-app/apps/sign/app/doc/[statementId]/admin/layout.tsx"]}]},{loading:[()=>Promise.resolve().then(a.bind(a,4484)),"/Users/talyaron/Documents/Freedi-app/apps/sign/app/doc/[statementId]/loading.tsx"],"not-found":[()=>Promise.resolve().then(a.bind(a,1430)),"/Users/talyaron/Documents/Freedi-app/apps/sign/app/doc/[statementId]/not-found.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,7093)),"/Users/talyaron/Documents/Freedi-app/apps/sign/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,5866,23)),"next/dist/client/components/not-found-error"]}],g=["/Users/talyaron/Documents/Freedi-app/apps/sign/app/doc/[statementId]/admin/settings/page.tsx"],p="/doc/[statementId]/admin/settings/page",u={require:a,loadChunk:()=>Promise.resolve()},h=new n.AppPageRouteModule({definition:{kind:d.x.APP_PAGE,page:"/doc/[statementId]/admin/settings/page",pathname:"/doc/[statementId]/admin/settings",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:m}});s()}catch(e){s(e)}})},1794:(e,t,a)=>{Promise.resolve().then(a.t.bind(a,9404,23))},8632:(e,t,a)=>{Promise.resolve().then(a.bind(a,8276))},8276:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>l});var s=a(326),i=a(7577),n=a(5047),d=a(1981),r=a(9082),o=a.n(r);function l(){let e=(0,n.useParams)().statementId,{t}=(0,d.$G)(),[a,r]=(0,i.useState)({allowComments:!0,allowApprovals:!0,requireLogin:!1,showHeatMap:!0,showViewCounts:!0,isPublic:!0}),[l,c]=(0,i.useState)(!0),[_,m]=(0,i.useState)(!1),[g,p]=(0,i.useState)(!1);(0,i.useCallback)(async()=>{try{c(!0);let t=await fetch(`/api/admin/settings/${e}`);if(t.ok){let e=await t.json();r(e)}}catch(e){console.error("Failed to fetch settings:",e)}finally{c(!1)}},[e]);let u=e=>{r(t=>({...t,[e]:!t[e]})),p(!1)},h=async()=>{try{m(!0),(await fetch(`/api/admin/settings/${e}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)})).ok&&(p(!0),setTimeout(()=>p(!1),3e3))}catch(e){console.error("Failed to save settings:",e)}finally{m(!1)}};return l?s.jsx("div",{className:o().settingsPage,children:s.jsx("p",{style:{textAlign:"center",padding:"var(--spacing-xl)",color:"var(--text-secondary)"},children:t("Loading...")})}):(0,s.jsxs)("div",{className:o().settingsPage,children:[(0,s.jsxs)("header",{className:o().dashboardHeader,children:[s.jsx("h1",{className:o().dashboardTitle,children:t("Settings")}),s.jsx("p",{className:o().dashboardSubtitle,children:t("Configure document visibility and interactions")})]}),(0,s.jsxs)("section",{className:o().settingsSection,children:[s.jsx("h2",{className:o().settingsSectionTitle,children:t("Visibility")}),(0,s.jsxs)("div",{className:o().settingRow,children:[(0,s.jsxs)("div",{className:o().settingInfo,children:[s.jsx("p",{className:o().settingLabel,children:t("Public Document")}),s.jsx("p",{className:o().settingDescription,children:t("Allow anyone with the link to view this document")})]}),s.jsx("button",{type:"button",className:`${o().toggle} ${a.isPublic?o().active:""}`,onClick:()=>u("isPublic"),"aria-pressed":a.isPublic})]}),(0,s.jsxs)("div",{className:o().settingRow,children:[(0,s.jsxs)("div",{className:o().settingInfo,children:[s.jsx("p",{className:o().settingLabel,children:t("Require Login")}),s.jsx("p",{className:o().settingDescription,children:t("Users must be logged in to view and interact")})]}),s.jsx("button",{type:"button",className:`${o().toggle} ${a.requireLogin?o().active:""}`,onClick:()=>u("requireLogin"),"aria-pressed":a.requireLogin})]})]}),(0,s.jsxs)("section",{className:o().settingsSection,children:[s.jsx("h2",{className:o().settingsSectionTitle,children:t("Interactions")}),(0,s.jsxs)("div",{className:o().settingRow,children:[(0,s.jsxs)("div",{className:o().settingInfo,children:[s.jsx("p",{className:o().settingLabel,children:t("Allow Comments")}),s.jsx("p",{className:o().settingDescription,children:t("Users can add comments to paragraphs")})]}),s.jsx("button",{type:"button",className:`${o().toggle} ${a.allowComments?o().active:""}`,onClick:()=>u("allowComments"),"aria-pressed":a.allowComments})]}),(0,s.jsxs)("div",{className:o().settingRow,children:[(0,s.jsxs)("div",{className:o().settingInfo,children:[s.jsx("p",{className:o().settingLabel,children:t("Allow Approvals")}),s.jsx("p",{className:o().settingDescription,children:t("Users can approve or disapprove paragraphs")})]}),s.jsx("button",{type:"button",className:`${o().toggle} ${a.allowApprovals?o().active:""}`,onClick:()=>u("allowApprovals"),"aria-pressed":a.allowApprovals})]})]}),(0,s.jsxs)("section",{className:o().settingsSection,children:[s.jsx("h2",{className:o().settingsSectionTitle,children:t("Display")}),(0,s.jsxs)("div",{className:o().settingRow,children:[(0,s.jsxs)("div",{className:o().settingInfo,children:[s.jsx("p",{className:o().settingLabel,children:t("Show Heat Map")}),s.jsx("p",{className:o().settingDescription,children:t("Display approval ratings as color indicators")})]}),s.jsx("button",{type:"button",className:`${o().toggle} ${a.showHeatMap?o().active:""}`,onClick:()=>u("showHeatMap"),"aria-pressed":a.showHeatMap})]}),(0,s.jsxs)("div",{className:o().settingRow,children:[(0,s.jsxs)("div",{className:o().settingInfo,children:[s.jsx("p",{className:o().settingLabel,children:t("Show View Counts")}),s.jsx("p",{className:o().settingDescription,children:t("Display how many users have viewed each section")})]}),s.jsx("button",{type:"button",className:`${o().toggle} ${a.showViewCounts?o().active:""}`,onClick:()=>u("showViewCounts"),"aria-pressed":a.showViewCounts})]})]}),s.jsx("button",{className:o().saveButton,onClick:h,disabled:_,children:t(_?"Saving...":g?"Saved!":"Save Settings")})]})}},5047:(e,t,a)=>{"use strict";var s=a(7389);a.o(s,"useParams")&&a.d(t,{useParams:function(){return s.useParams}}),a.o(s,"useRouter")&&a.d(t,{useRouter:function(){return s.useRouter}}),a.o(s,"useSearchParams")&&a.d(t,{useSearchParams:function(){return s.useSearchParams}})},1981:(e,t,a)=>{"use strict";a.d(t,{$G:()=>s.useTranslation}),a(1410),a(1956),a(9982);var s=a(6890)},3327:e=>{e.exports={adminLayout:"admin_adminLayout__1MVcB",sidebar:"admin_sidebar__mZCpf",sidebarHeader:"admin_sidebarHeader__Z3kk2",sidebarTitle:"admin_sidebarTitle__uU8zJ",documentTitle:"admin_documentTitle__lrZ_l",nav:"admin_nav__M_3kB",navLink:"admin_navLink__CFUuZ",sidebarFooter:"admin_sidebarFooter__NGLgJ",backLink:"admin_backLink__Gfv40",main:"admin_main__F9VHN",dashboard:"admin_dashboard__NpR5F",dashboardHeader:"admin_dashboardHeader__be8ww",dashboardTitle:"admin_dashboardTitle__oV8_R",dashboardSubtitle:"admin_dashboardSubtitle__fpPjZ",statsGrid:"admin_statsGrid__nmnuH",statCard:"admin_statCard__S6jgD",statLabel:"admin_statLabel__BdXql",statValue:"admin_statValue__tHjoa",statChange:"admin_statChange__LfzdD",positive:"admin_positive__6thQ6",negative:"admin_negative__OpX3G",section:"admin_section__RTcYl",sectionTitle:"admin_sectionTitle__EsOS5",usersPage:"admin_usersPage__JK6aG",toolbar:"admin_toolbar__y_BGr",searchInput:"admin_searchInput__WS1_4",filterSelect:"admin_filterSelect__LWKSW",exportButton:"admin_exportButton__mgv5Z",usersTable:"admin_usersTable__YyjV7",statusBadge:"admin_statusBadge__6E9Rr",signed:"admin_signed__ey_ej",rejected:"admin_rejected__NznPm",viewed:"admin_viewed__YSLt_",pending:"admin_pending__n4kRq",settingsPage:"admin_settingsPage__AATSK",settingsSection:"admin_settingsSection__07yQ5",settingsSectionTitle:"admin_settingsSectionTitle__Je3qb",settingRow:"admin_settingRow__uJYZC",settingInfo:"admin_settingInfo__Q3ci7",settingLabel:"admin_settingLabel__ZsRUl",settingDescription:"admin_settingDescription__YDapz",toggle:"admin_toggle__FaYY_",active:"admin_active__wqnXv",saveButton:"admin_saveButton__p2JKC"}},9082:e=>{e.exports={adminLayout:"admin_adminLayout__1MVcB",sidebar:"admin_sidebar__mZCpf",sidebarHeader:"admin_sidebarHeader__Z3kk2",sidebarTitle:"admin_sidebarTitle__uU8zJ",documentTitle:"admin_documentTitle__lrZ_l",nav:"admin_nav__M_3kB",navLink:"admin_navLink__CFUuZ",sidebarFooter:"admin_sidebarFooter__NGLgJ",backLink:"admin_backLink__Gfv40",main:"admin_main__F9VHN",dashboard:"admin_dashboard__NpR5F",dashboardHeader:"admin_dashboardHeader__be8ww",dashboardTitle:"admin_dashboardTitle__oV8_R",dashboardSubtitle:"admin_dashboardSubtitle__fpPjZ",statsGrid:"admin_statsGrid__nmnuH",statCard:"admin_statCard__S6jgD",statLabel:"admin_statLabel__BdXql",statValue:"admin_statValue__tHjoa",statChange:"admin_statChange__LfzdD",positive:"admin_positive__6thQ6",negative:"admin_negative__OpX3G",section:"admin_section__RTcYl",sectionTitle:"admin_sectionTitle__EsOS5",usersPage:"admin_usersPage__JK6aG",toolbar:"admin_toolbar__y_BGr",searchInput:"admin_searchInput__WS1_4",filterSelect:"admin_filterSelect__LWKSW",exportButton:"admin_exportButton__mgv5Z",usersTable:"admin_usersTable__YyjV7",statusBadge:"admin_statusBadge__6E9Rr",signed:"admin_signed__ey_ej",rejected:"admin_rejected__NznPm",viewed:"admin_viewed__YSLt_",pending:"admin_pending__n4kRq",settingsPage:"admin_settingsPage__AATSK",settingsSection:"admin_settingsSection__07yQ5",settingsSectionTitle:"admin_settingsSectionTitle__Je3qb",settingRow:"admin_settingRow__uJYZC",settingInfo:"admin_settingInfo__Q3ci7",settingLabel:"admin_settingLabel__ZsRUl",settingDescription:"admin_settingDescription__YDapz",toggle:"admin_toggle__FaYY_",active:"admin_active__wqnXv",saveButton:"admin_saveButton__p2JKC"}},5616:(e,t,a)=>{"use strict";a.a(e,async(e,s)=>{try{a.r(t),a.d(t,{default:()=>g});var i=a(9510),n=a(7371),d=a(1615),r=a(8585),o=a(8894),l=a(5734),c=a(3327),_=a.n(c),m=e([o]);async function g({children:e,params:t}){let{statementId:a}=await t,s=await (0,d.cookies)(),c=(0,l.ld)(s.toString());c||(0,r.redirect)(`/login?redirect=/doc/${a}/admin`);let m=await (0,o.SR)(a);return m||(0,r.redirect)("/"),m.creator?.uid===c||m.creatorId===c||(0,r.redirect)(`/doc/${a}`),(0,i.jsxs)("div",{className:_().adminLayout,children:[(0,i.jsxs)("aside",{className:_().sidebar,children:[(0,i.jsxs)("div",{className:_().sidebarHeader,children:[i.jsx("h2",{className:_().sidebarTitle,children:"Admin Panel"}),i.jsx("p",{className:_().documentTitle,children:m.statement})]}),(0,i.jsxs)("nav",{className:_().nav,children:[(0,i.jsxs)(n.default,{href:`/doc/${a}/admin`,className:_().navLink,children:[(0,i.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[i.jsx("rect",{x:"3",y:"3",width:"7",height:"7"}),i.jsx("rect",{x:"14",y:"3",width:"7",height:"7"}),i.jsx("rect",{x:"14",y:"14",width:"7",height:"7"}),i.jsx("rect",{x:"3",y:"14",width:"7",height:"7"})]}),"Dashboard"]}),(0,i.jsxs)(n.default,{href:`/doc/${a}/admin/users`,className:_().navLink,children:[(0,i.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[i.jsx("path",{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"}),i.jsx("circle",{cx:"9",cy:"7",r:"4"}),i.jsx("path",{d:"M23 21v-2a4 4 0 0 0-3-3.87"}),i.jsx("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"})]}),"Users"]}),(0,i.jsxs)(n.default,{href:`/doc/${a}/admin/settings`,className:_().navLink,children:[(0,i.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[i.jsx("circle",{cx:"12",cy:"12",r:"3"}),i.jsx("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"})]}),"Settings"]})]}),i.jsx("div",{className:_().sidebarFooter,children:(0,i.jsxs)(n.default,{href:`/doc/${a}`,className:_().backLink,children:[i.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:i.jsx("path",{d:"M19 12H5M12 19l-7-7 7-7"})}),"Back to Document"]})})]}),i.jsx("main",{className:_().main,children:e})]})}o=(m.then?(await m)():m)[0],s()}catch(e){s(e)}})},8742:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>s});let s=(0,a(8570).createProxy)(String.raw`/Users/talyaron/Documents/Freedi-app/apps/sign/app/doc/[statementId]/admin/settings/page.tsx#default`)}};var t=require("../../../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),s=t.X(0,[380,704,552,15,490,365],()=>a(386));module.exports=s})();