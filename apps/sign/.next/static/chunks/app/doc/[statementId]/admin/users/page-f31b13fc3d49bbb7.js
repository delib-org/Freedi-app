(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[337],{356:function(e,t,a){Promise.resolve().then(a.bind(a,8731))},8731:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return l}});var s=a(7437),n=a(2265),i=a(9376),d=a(4111),r=a(9717),c=a.n(r);function l(){let e=(0,i.useParams)().statementId,{t}=(0,d.$G)(),[a,r]=(0,n.useState)([]),[l,o]=(0,n.useState)(!0),[_,u]=(0,n.useState)(""),[m,h]=(0,n.useState)("all"),[g,p]=(0,n.useState)(!1),x=(0,n.useCallback)(async()=>{try{o(!0);let t=new URLSearchParams;"all"!==m&&t.set("status",m),_&&t.set("search",_);let a=await fetch("/api/admin/users/".concat(e,"?").concat(t));if(a.ok){let e=await a.json();r(e.users)}}catch(e){console.error("Failed to fetch users:",e)}finally{o(!1)}},[e,m,_]);(0,n.useEffect)(()=>{x()},[x]);let j=async()=>{try{p(!0);let t=await fetch("/api/admin/export/".concat(e));if(t.ok){let a=await t.blob(),s=window.URL.createObjectURL(a),n=document.createElement("a");n.href=s,n.download="document-users-".concat(e,".csv"),document.body.appendChild(n),n.click(),window.URL.revokeObjectURL(s),n.remove()}}catch(e){console.error("Export failed:",e)}finally{p(!1)}},b=e=>e?new Date(e).toLocaleDateString():"-",v=e=>{switch(e){case"signed":return c().signed;case"rejected":return c().rejected;case"viewed":return c().viewed;default:return c().pending}};return(0,s.jsxs)("div",{className:c().usersPage,children:[(0,s.jsxs)("header",{className:c().dashboardHeader,children:[(0,s.jsx)("h1",{className:c().dashboardTitle,children:t("Users")}),(0,s.jsx)("p",{className:c().dashboardSubtitle,children:t("Manage document participants")})]}),(0,s.jsxs)("div",{className:c().toolbar,children:[(0,s.jsx)("input",{type:"text",className:c().searchInput,placeholder:t("Search users..."),value:_,onChange:e=>u(e.target.value)}),(0,s.jsxs)("select",{className:c().filterSelect,value:m,onChange:e=>h(e.target.value),children:[(0,s.jsx)("option",{value:"all",children:t("All Status")}),(0,s.jsx)("option",{value:"signed",children:t("Signed")}),(0,s.jsx)("option",{value:"rejected",children:t("Rejected")}),(0,s.jsx)("option",{value:"viewed",children:t("Viewed")})]}),(0,s.jsxs)("button",{className:c().exportButton,onClick:j,disabled:g,children:[(0,s.jsxs)("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,s.jsx)("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),(0,s.jsx)("polyline",{points:"7 10 12 15 17 10"}),(0,s.jsx)("line",{x1:"12",y1:"15",x2:"12",y2:"3"})]}),g?t("Exporting..."):t("Export CSV")]})]}),(0,s.jsx)("section",{className:c().section,children:l?(0,s.jsx)("p",{style:{textAlign:"center",padding:"var(--spacing-lg)",color:"var(--text-secondary)"},children:t("Loading...")}):0===a.length?(0,s.jsx)("p",{style:{textAlign:"center",padding:"var(--spacing-lg)",color:"var(--text-secondary)"},children:t("No users found")}):(0,s.jsxs)("table",{className:c().usersTable,children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{children:t("User")}),(0,s.jsx)("th",{children:t("Status")}),(0,s.jsx)("th",{children:t("Date")}),(0,s.jsx)("th",{children:t("Approvals")}),(0,s.jsx)("th",{children:t("Comments")})]})}),(0,s.jsx)("tbody",{children:a.map(e=>(0,s.jsxs)("tr",{children:[(0,s.jsx)("td",{children:(0,s.jsxs)("div",{children:[(0,s.jsx)("strong",{children:e.odlUserDisplayName}),(0,s.jsx)("br",{}),(0,s.jsxs)("small",{style:{color:"var(--text-caption)"},children:[e.odlUserId.substring(0,12),"..."]})]})}),(0,s.jsx)("td",{children:(0,s.jsx)("span",{className:"".concat(c().statusBadge," ").concat(v(e.signed)),children:t(e.signed.charAt(0).toUpperCase()+e.signed.slice(1))})}),(0,s.jsx)("td",{children:b(e.signedAt)}),(0,s.jsx)("td",{children:e.approvalsCount}),(0,s.jsx)("td",{children:e.commentsCount})]},e.odlUserId))})]})})]})}},9376:function(e,t,a){"use strict";var s=a(5475);a.o(s,"useParams")&&a.d(t,{useParams:function(){return s.useParams}}),a.o(s,"useRouter")&&a.d(t,{useRouter:function(){return s.useRouter}}),a.o(s,"useSearchParams")&&a.d(t,{useSearchParams:function(){return s.useSearchParams}})},4111:function(e,t,a){"use strict";a.d(t,{$G:function(){return s.useTranslation}}),a(6810),a(5334),a(1288);var s=a(4566)},9717:function(e){e.exports={adminLayout:"admin_adminLayout__1MVcB",sidebar:"admin_sidebar__mZCpf",sidebarHeader:"admin_sidebarHeader__Z3kk2",sidebarTitle:"admin_sidebarTitle__uU8zJ",documentTitle:"admin_documentTitle__lrZ_l",nav:"admin_nav__M_3kB",navLink:"admin_navLink__CFUuZ",sidebarFooter:"admin_sidebarFooter__NGLgJ",backLink:"admin_backLink__Gfv40",main:"admin_main__F9VHN",dashboard:"admin_dashboard__NpR5F",dashboardHeader:"admin_dashboardHeader__be8ww",dashboardTitle:"admin_dashboardTitle__oV8_R",dashboardSubtitle:"admin_dashboardSubtitle__fpPjZ",statsGrid:"admin_statsGrid__nmnuH",statCard:"admin_statCard__S6jgD",statLabel:"admin_statLabel__BdXql",statValue:"admin_statValue__tHjoa",statChange:"admin_statChange__LfzdD",positive:"admin_positive__6thQ6",negative:"admin_negative__OpX3G",section:"admin_section__RTcYl",sectionTitle:"admin_sectionTitle__EsOS5",usersPage:"admin_usersPage__JK6aG",toolbar:"admin_toolbar__y_BGr",searchInput:"admin_searchInput__WS1_4",filterSelect:"admin_filterSelect__LWKSW",exportButton:"admin_exportButton__mgv5Z",usersTable:"admin_usersTable__YyjV7",statusBadge:"admin_statusBadge__6E9Rr",signed:"admin_signed__ey_ej",rejected:"admin_rejected__NznPm",viewed:"admin_viewed__YSLt_",pending:"admin_pending__n4kRq",settingsPage:"admin_settingsPage__AATSK",settingsSection:"admin_settingsSection__07yQ5",settingsSectionTitle:"admin_settingsSectionTitle__Je3qb",settingRow:"admin_settingRow__uJYZC",settingInfo:"admin_settingInfo__Q3ci7",settingLabel:"admin_settingLabel__ZsRUl",settingDescription:"admin_settingDescription__YDapz",toggle:"admin_toggle__FaYY_",active:"admin_active__wqnXv",saveButton:"admin_saveButton__p2JKC"}}},function(e){e.O(0,[817,566,971,117,744],function(){return e(e.s=356)}),_N_E=e.O()}]);