# Version Control System - User Guide

## Overview

When version control is enabled on a document, your suggestions go through an admin review process before replacing official paragraphs. This guide explains how it works and what to expect.

## How It Works (Simple Explanation)

### Old Way (Without Version Control)
1. You suggest a replacement for a paragraph
2. Others vote on your suggestion
3. If it gets enough support (e.g., 50%), it automatically replaces the original
4. âœ… Fast and democratic

### New Way (With Version Control)
1. You suggest a replacement for a paragraph
2. Others vote on your suggestion
3. If it gets enough support (e.g., 50%), it enters a **review queue**
4. **Document admin reviews** and approves/rejects it
5. If approved, it replaces the original
6. âœ… Slower but ensures quality control

## What This Means for You

### When You Create a Suggestion

**Nothing changes for you!**
- Create suggestions the same way
- Write your proposed text
- Submit

**What's different:**
- You'll see a note: "This document has version control enabled"
- Your suggestion needs both **community support** AND **admin approval**

### When Others Vote on Your Suggestion

**Voting works exactly the same:**
- Users can agree/disagree with your suggestion
- Consensus percentage updates in real-time
- You can see how close you are to the threshold

**New indicator:**
- If your suggestion reaches the review threshold (e.g., 50%), you'll see:
  - Badge: "**In Review Queue**"
  - Tooltip: "Waiting for admin review (78% consensus)"

### When Admin Reviews Your Suggestion

You'll receive a notification when the admin makes a decision:

**If Approved:**
- âœ… Notification: "Your suggestion was approved and is now part of the document"
- Your suggestion replaces the paragraph
- You'll see it in the official document
- Version number increments (e.g., v2 â†’ v3)

**If Approved with Edits:**
- âœ… Notification: "Your suggestion was approved with modifications"
- Admin may have tweaked your text for clarity/grammar
- Check the final version to see what changed
- Still counts as your contribution!

**If Rejected:**
- âŒ Notification: "Your suggestion was reviewed and not accepted at this time"
- Admin's reason is included (e.g., "Not aligned with document goals")
- Original paragraph stays unchanged
- **You can still:** Revise and resubmit based on feedback

### Understanding Consensus Threshold

**Example: Document has 50% threshold**

**Your suggestion at 45% consensus:**
- âŒ Not in queue yet
- Keep promoting it! Needs 5% more support

**Your suggestion reaches 51% consensus:**
- âœ… Automatically enters review queue
- No action needed from you
- Wait for admin review

**Your suggestion rises to 78% consensus while in queue:**
- ğŸ”¥ Admin sees it's very popular
- More likely to be approved
- But admin still has final say

**Your suggestion drops to 40% after entering queue:**
- âš ï¸ Admin sees "consensus dropped" warning
- Might be rejected
- Community changed their mind

## Version History

### What It Is

Every time a paragraph changes, the old version is saved. You can:
- View all past versions of a paragraph
- See who changed it and when
- Read the old text

### How to View History

1. Click on any paragraph in the document
2. Look for the version badge (e.g., "**v5**")
3. Click the badge to open version history
4. Expand any version to see details

**What you'll see:**
- Version number (1, 2, 3...)
- Date/time of change
- "Changed by Community (78% agreed)" or "Changed by Admin"
- Admin notes (if provided)
- Full text of that version

### Why This Matters

**Transparency:**
- You can see exactly what changed over time
- Know why changes happened
- Understand document evolution

**Learning:**
- See what kinds of suggestions get approved
- Learn from rejection patterns
- Improve your future suggestions

## Tips for Success

### Getting Your Suggestions Approved

**1. Build Strong Consensus First**
- Don't just barely reach threshold (e.g., 50.1%)
- Aim for 60-70%+ for higher approval chances
- Engage community to vote

**2. Write High-Quality Suggestions**
- Clear, concise language
- Stay on topic
- Fix grammar/typos before submitting
- Align with document's purpose

**3. Respect Admin Feedback**
- If rejected, read the admin's notes carefully
- Revise based on feedback
- Resubmit improved version

**4. Be Patient**
- Admin review can take 1-3 days
- Don't spam multiple similar suggestions
- Trust the process

### Understanding Rejections

**Common reasons admins reject suggestions:**
1. **Quality issues**: Unclear writing, errors, off-topic
2. **Scope issues**: Too broad or too narrow
3. **Timing issues**: Not right for document at this stage
4. **Duplication**: Another suggestion already covers this
5. **Misalignment**: Doesn't fit document goals

**Not personal!** Admins are looking out for document quality.

### Maximizing Impact

**Do:**
- âœ… Suggest meaningful improvements
- âœ… Get community input before submitting
- âœ… Respond to comments on your suggestion
- âœ… Learn from version history

**Don't:**
- âŒ Submit minor typo fixes as suggestions (tell admin directly)
- âŒ Create duplicate suggestions
- âŒ Argue with rejection decisions in comments
- âŒ Game the system by asking friends to vote

## Frequently Asked Questions

### Q: Why was version control enabled on this document?

**A:** Document admins enable it when:
- Document is important and needs quality control
- Too many low-quality suggestions were auto-replacing text
- They want oversight over changes
- Document is in a sensitive/critical stage

It's their choice as document stewards.

### Q: How long does admin review take?

**A:** Varies by document:
- Active admins: 1-24 hours
- Busy admins: 1-3 days
- Inactive admins: Longer (consider messaging them)

Check the document's review queue size for hints.

### Q: Can I see the review queue?

**A:** No, only admins see the queue. You'll only know:
- Your suggestion is in queue (badge on your suggestion)
- Your suggestion was approved/rejected (notification)

### Q: What if admin never reviews my suggestion?

**A:** If a suggestion sits in queue for >1 week with no response:
1. Message the admin politely
2. Check if admin is active (last seen date)
3. Consider suggesting to a different section admin reviews actively

### Q: Can admin reject a suggestion with 90% consensus?

**A:** Yes, admin has final say. However:
- Very high consensus (>80%) puts pressure on admin to approve
- Unjustified rejections damage admin's credibility
- If this happens frequently, community can petition to change admin

### Q: Will my rejected suggestion lose all its votes?

**A:** No! Votes stay. You can:
- Revise the suggestion based on feedback
- Resubmit (votes may carry over depending on implementation)
- Or leave it for others to vote on still

### Q: How do I know if admin edited my suggestion?

**A:** Check the version history after approval:
- Look for "admin-edited" tag
- Compare to your original suggestion
- Admin notes may explain changes

### Q: Can I "undo" my suggestion after it's approved?

**A:** Not directly, but:
- Ask admin to rollback the version (they can restore old versions)
- Or submit a new suggestion to revert the change
- Admin decides whether to honor your request

## Notifications

You'll receive notifications for:
- âœ… **Suggestion approved**: "Your suggestion was approved"
- âŒ **Suggestion rejected**: "Your suggestion was not accepted" + reason
- ğŸ“ **Suggestion edited**: "Your suggestion was approved with modifications"
- ğŸ”” **Consensus milestone**: "Your suggestion reached 50% consensus" (entered queue)

**Managing notifications:**
(Future feature - currently all notifications enabled)

## Seeing Document-Wide Version Control Status

**Check if version control is enabled:**
1. Look for banner at top of document: "ğŸ“‹ Version Control Enabled - Suggestions require admin approval"
2. Or check document settings/info page

**If enabled, you'll see:**
- Review threshold (e.g., "50% consensus required for review")
- Number of pending reviews (if shown publicly)
- Last admin review activity

## Support

**Questions?**
- Read the [Admin Guide](VERSION_CONTROL_ADMIN_GUIDE.md) to understand admin perspective
- Ask in document comments
- Message document admin directly

**Found a bug?**
- Report at [GitHub Issues](https://github.com/anthropics/freedi-app/issues)

**Want version control on your document?**
- Ask your document admin to enable it
- Or enable it yourself if you're an admin

---

**Version:** 1.0.0 (MVP - Manual Mode)
**Last Updated:** January 2026

**Remember:** Version control exists to maintain document quality while still respecting community input. Your suggestions matter, and this system ensures they get proper consideration! ğŸš€
